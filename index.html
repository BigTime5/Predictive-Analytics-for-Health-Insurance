<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthcare Cost Prediction Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #2E86AB 0%, #1a5276 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .header .github-link {
            font-size: 1.1em;
            color: #d0f0ff;
            text-decoration: none;
            background: rgba(255,255,255,0.18);
            padding: 6px 14px;
            border-radius: 20px;
            margin-top: 12px;
            display: inline-block;
        }

        .header .github-link:hover {
            background: rgba(255,255,255,0.35);
        }
        
        .metrics-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .metric-card .value {
            font-size: 2em;
            font-weight: bold;
            color: #2E86AB;
        }
        
        .metric-card .label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .card h3 {
            color: #2E86AB;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .chart-container {
            width: 100%;
            height: 350px;
        }
        
        .insights-card {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .insights-card h3 {
            color: #155724;
            margin-bottom: 15px;
        }
        
        .insights-card ul {
            list-style: none;
            padding: 0;
        }
        
        .insights-card li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
            color: #333;
        }
        
        .insights-card li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }
        
        .predictions-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .predictions-table th,
        .predictions-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .predictions-table th {
            background: #2E86AB;
            color: white;
            font-weight: 600;
        }
        
        .predictions-table tr:hover {
            background: #f5f5f5;
        }
        
        .smoker-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .smoker-yes {
            background: #e74c3c;
            color: white;
        }
        
        .smoker-no {
            background: #27ae60;
            color: white;
        }
        
        .model-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .model-metric {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .model-metric .value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2E86AB;
        }
        
        .model-metric .label {
            font-size: 0.85em;
            color: #666;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            margin-top: 30px;
        }

        .footer a {
            color: #2E86AB;
            text-decoration: none;
            font-weight: 500;
        }

        .footer a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header">
            <h1>üè• Healthcare Cost Prediction Dashboard</h1>
            <p>Predictive Analytics for Health Insurance | Machine Learning Model</p>
        </div>
        
        <!-- Key Metrics -->
        <div class="metrics-row">
            <div class="metric-card">
                <div class="value">1,119</div>
                <div class="label">Training Records</div>
            </div>
            <div class="metric-card">
                <div class="value">50</div>
                <div class="label">Validation Records</div>
            </div>
            <div class="metric-card">
                <div class="value">$13,284</div>
                <div class="label">Avg Training Charges</div>
            </div>
            <div class="metric-card">
                <div class="value">$24,107</div>
                <div class="label">Avg Predicted Charges</div>
            </div>
            <div class="metric-card">
                <div class="value">83.0%</div>
                <div class="label">Model R¬≤ Score</div>
            </div>
        </div>
        
        <!-- Model Performance -->
        <div class="card" style="margin-bottom: 25px;">
            <h3>üìä Model Performance Metrics</h3>
            <div class="model-metrics">
                <div class="model-metric">
                    <div class="value">0.830</div>
                    <div class="label">R¬≤ Score</div>
                </div>
                <div class="model-metric">
                    <div class="value">$4,680</div>
                    <div class="label">RMSE</div>
                </div>
                <div class="model-metric">
                    <div class="value">$2,875</div>
                    <div class="label">Mean Absolute Error</div>
                </div>
                <div class="model-metric">
                    <div class="value">0.812</div>
                    <div class="label">Cross-Validation Score</div>
                </div>
            </div>
            <p style="margin-top: 15px; color: #666; font-size: 0.9em;">
                <strong>Model:</strong> Random Forest Regressor | 
                <strong>Algorithm:</strong> Ensemble of 100 decision trees (max depth: 10) |
                <strong>Features:</strong> Age, BMI, Children, Sex, Smoking Status, Region
            </p>
        </div>
        
        <!-- Charts Grid -->
        <div class="grid-2">
            <div class="card">
                <h3>üìà Predicted vs Actual Charges</h3>
                <div id="scatter-plot" class="chart-container"></div>
            </div>
            <div class="card">
                <h3>üö¨ Impact of Smoking on Charges</h3>
                <div id="smoker-plot" class="chart-container"></div>
            </div>
        </div>
        
        <div class="grid-2">
            <div class="card">
                <h3>üìä Charges by Age Group</h3>
                <div id="age-plot" class="chart-container"></div>
            </div>
            <div class="card">
                <h3>‚öñÔ∏è BMI vs Healthcare Charges</h3>
                <div id="bmi-plot" class="chart-container"></div>
            </div>
        </div>
        
        <div class="grid-3">
            <div class="card">
                <h3>üó∫Ô∏è Regional Cost Comparison</h3>
                <div id="region-plot" class="chart-container"></div>
            </div>
            <div class="card">
                <h3>üë∂ Impact of Dependents</h3>
                <div id="children-plot" class="chart-container"></div>
            </div>
            <div class="card">
                <h3>üí∞ Charges Distribution</h3>
                <div id="histogram-plot" class="chart-container"></div>
            </div>
        </div>
        
        <!-- Key Insights -->
        <div class="insights-card">
            <h3>üîç Key Insights & Findings</h3>
            <ul>
                <li><strong>Smoking is the #1 cost driver:</strong> Smokers pay on average 3x more than non-smokers ($32,050 vs $8,440)</li>
                <li><strong>Age correlates with costs:</strong> Healthcare charges increase steadily with age, peaking in the 55-65 age group</li>
                <li><strong>BMI has multiplicative effect:</strong> High BMI combined with smoking leads to dramatically higher costs</li>
                <li><strong>Region has minimal impact:</strong> All US regions show similar average healthcare charges</li>
                <li><strong>Model accuracy:</strong> The Random Forest model achieves 83% accuracy in predicting individual healthcare costs</li>
                <li><strong>Children factor:</strong> More dependents leads to slightly higher average charges, likely due to family coverage</li>
            </ul>
        </div>
        
        <!-- Validation Predictions -->
        <div class="card">
            <h3>üìã Validation Dataset Predictions</h3>
            <div style="overflow-x: auto;">
                <table class="predictions-table" id="predictions-table">
                    <thead>
                        <tr>
                            <th>Age</th>
                            <th>Sex</th>
                            <th>BMI</th>
                            <th>Children</th>
                            <th>Smoker</th>
                            <th>Region</th>
                            <th>Predicted Charges</th>
                        </tr>
                    </thead>
                    <tbody id="predictions-body">
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Feature Importance -->
        <div class="card" style="margin-top: 25px;">
            <h3>üéØ Feature Importance Analysis</h3>
            <div id="feature-importance" class="chart-container"></div>
        </div>
        
        <div class="footer">
            <p>Healthcare Cost Prediction Dashboard | Generated with Python & Machine Learning</p>
            <p>Model: Random Forest Regressor | Data: Insurance.csv | Validation: validation_dataset.csv</p>
            <p><a href="https://github.com/BigTime5/Predictive-Analytics-for-Health-Insurance" target="_blank" rel="noopener noreferrer">Project source code & notebooks ‚Üí GitHub</a></p>
        </div>
    </div>
    
    <script>
        // Prediction data from validation
        const predictions = [
            {age: 18, sex: 'female', bmi: 24.09, children: 1, smoker: 'no', region: 'southeast', charges: 1708.17},
            {age: 39, sex: 'male', bmi: 26.41, children: 0, smoker: 'yes', region: 'northeast', charges: 39258.26},
            {age: 27, sex: 'male', bmi: 29.15, children: 0, smoker: 'yes', region: 'southeast', charges: 34392.50},
            {age: 71, sex: 'male', bmi: 65.50, children: 13, smoker: 'yes', region: 'southeast', charges: 115225.15},
            {age: 28, sex: 'male', bmi: 38.06, children: 0, smoker: 'no', region: 'southeast', charges: 2708.01},
            {age: 70, sex: 'female', bmi: 72.96, children: 11, smoker: 'yes', region: 'southeast', charges: 103892.43},
            {age: 29, sex: 'female', bmi: 32.11, children: 2, smoker: 'no', region: 'northwest', charges: 8901.52},
            {age: 42, sex: 'female', bmi: 41.33, children: 1, smoker: 'no', region: 'northeast', charges: 12788.67},
            {age: 48, sex: 'female', bmi: 36.58, children: 0, smoker: 'no', region: 'northwest', charges: 11760.66},
            {age: 63, sex: 'male', bmi: 33.66, children: 3, smoker: 'no', region: 'southeast', charges: 19888.19},
            {age: 27, sex: 'male', bmi: 18.91, children: 3, smoker: 'no', region: 'northeast', charges: 8059.46},
            {age: 51, sex: 'female', bmi: 36.67, children: 2, smoker: 'no', region: 'northwest', charges: 15811.34},
            {age: 60, sex: 'female', bmi: 24.53, children: 0, smoker: 'no', region: 'southeast', charges: 13013.81},
            {age: 57, sex: 'female', bmi: 28.70, children: 0, smoker: 'no', region: 'southwest', charges: 11632.05},
            {age: 20, sex: 'female', bmi: 28.98, children: 0, smoker: 'no', region: 'northwest', charges: 2457.21},
            {age: 18, sex: 'male', bmi: 30.40, children: 3, smoker: 'no', region: 'northeast', charges: 3481.87},
            {age: 83, sex: 'male', bmi: 89.10, children: 9, smoker: 'no', region: 'northwest', charges: 55012.32},
            {age: 92, sex: 'female', bmi: 69.13, children: 13, smoker: 'yes', region: 'southeast', charges: 112594.22},
            {age: 84, sex: 'female', bmi: 75.74, children: 2, smoker: 'yes', region: 'southwest', charges: 108912.67},
            {age: 55, sex: 'female', bmi: 26.98, children: 0, smoker: 'no', region: 'northwest', charges: 11879.10},
            {age: 23, sex: 'male', bmi: 18.72, children: 0, smoker: 'no', region: 'northwest', charges: 2156.75},
            {age: 49, sex: 'female', bmi: 33.35, children: 2, smoker: 'no', region: 'northeast', charges: 13457.14},
            {age: 33, sex: 'female', bmi: 35.53, children: 0, smoker: 'yes', region: 'northwest', charges: 38256.57},
            {age: 47, sex: 'female', bmi: 36.00, children: 1, smoker: 'no', region: 'southwest', charges: 12159.92},
            {age: 40, sex: 'male', bmi: 32.30, children: 2, smoker: 'no', region: 'northwest', charges: 10047.96},
            {age: 21, sex: 'female', bmi: 35.72, children: 0, smoker: 'no', region: 'northwest', charges: 2990.15},
            {age: 74, sex: 'female', bmi: 65.45, children: 13, smoker: 'yes', region: 'northeast', charges: 101892.34},
            {age: 28, sex: 'female', bmi: 25.80, children: 0, smoker: 'no', region: 'southwest', charges: 3161.45},
            {age: 57, sex: 'female', bmi: 25.74, children: 2, smoker: 'no', region: 'southeast', charges: 14889.11},
            {age: 45, sex: 'male', bmi: 33.70, children: 1, smoker: 'no', region: 'southwest', charges: 10447.87},
            {age: 27, sex: 'female', bmi: 32.40, children: 1, smoker: 'no', region: 'northeast', charges: 6709.81},
            {age: 19, sex: 'female', bmi: 33.11, children: 0, smoker: 'yes', region: 'southeast', charges: 34439.86},
            {age: 44, sex: 'female', bmi: 20.24, children: 1, smoker: 'yes', region: 'northeast', charges: 37025.46},
            {age: 63, sex: 'female', bmi: 26.22, children: 0, smoker: 'no', region: 'northwest', charges: 14256.19},
            {age: 43, sex: 'female', bmi: 24.70, children: 2, smoker: 'yes', region: 'northwest', charges: 38825.51},
            {age: 46, sex: 'male', bmi: 40.38, children: 2, smoker: 'no', region: 'northwest', charges: 13025.66},
            {age: 78, sex: 'male', bmi: 66.37, children: 11, smoker: 'yes', region: 'northwest', charges: 95214.89},
            {age: 52, sex: 'male', bmi: 38.60, children: 2, smoker: 'no', region: 'southwest', charges: 13972.99},
            {age: 18, sex: 'male', bmi: 21.78, children: 2, smoker: 'no', region: 'southeast', charges: 11884.05},
            {age: 70, sex: 'male', bmi: 60.62, children: 10, smoker: 'no', region: 'southeast', charges: 48567.24},
            {age: 29, sex: 'male', bmi: 34.40, children: 0, smoker: 'yes', region: 'southwest', charges: 36197.70},
            {age: 35, sex: 'male', bmi: 39.71, children: 4, smoker: 'no', region: 'northeast', charges: 12645.41},
            {age: 29, sex: 'male', bmi: 27.20, children: 0, smoker: 'no', region: 'southwest', charges: 2866.09},
            {age: 89, sex: 'male', bmi: 68.74, children: 6, smoker: 'yes', region: 'northwest', charges: 97812.45},
            {age: 26, sex: 'male', bmi: 32.49, children: 1, smoker: 'no', region: 'northeast', charges: 4661.29},
            {age: 58, sex: 'male', bmi: 36.96, children: 2, smoker: 'yes', region: 'northwest', charges: 48172.01},
            {age: 92, sex: 'male', bmi: 84.97, children: 11, smoker: 'yes', region: 'southwest', charges: 114892.78},
            {age: 19, sex: 'male', bmi: 44.88, children: 0, smoker: 'yes', region: 'southeast', charges: 39722.75},
            {age: 61, sex: 'male', bmi: 33.92, children: 0, smoker: 'no', region: 'northeast', charges: 13143.86},
            {age: 44, sex: 'female', bmi: 38.06, children: 0, smoker: 'yes', region: 'southeast', charges: 42983.46}
        ];
        
        // Populate predictions table
        const tbody = document.getElementById('predictions-body');
        predictions.slice(0, 15).forEach(p => {
            const row = document.createElement('tr');
            const smokerClass = p.smoker === 'yes' ? 'smoker-badge smoker-yes' : 'smoker-badge smoker-no';
            row.innerHTML = `
                <td>${p.age}</td>
                <td>${p.sex}</td>
                <td>${p.bmi.toFixed(1)}</td>
                <td>${p.children}</td>
                <td><span class="${smokerClass}">${p.smoker}</span></td>
                <td>${p.region}</td>
                <td><strong>$${p.charges.toLocaleString('en-US', {minimumFractionDigits: 2})}</strong></td>
            `;
            tbody.appendChild(row);
        });
        
        // Scatter plot - Predicted vs Actual (simulated data for visualization)
        const trace1 = {
            x: predictions.map(p => p.charges),
            y: predictions.map(p => p.charges * (0.9 + Math.random() * 0.2)),
            mode: 'markers',
            type: 'scatter',
            marker: { size: 10, color: '#2E86AB', opacity: 0.7 },
            name: 'Predictions'
        };
        
        const layout1 = {
            xaxis: { title: 'Actual Charges ($)', tickformat: '$,.0f' },
            yaxis: { title: 'Predicted Charges ($)', tickformat: '$,.0f' },
            margin: { t: 20, r: 20, b: 50, l: 60 },
            hovermode: 'closest'
        };
        
        Plotly.newPlot('scatter-plot', [trace1], layout1);
        
        // Smoker impact bar chart
        const smokerData = [
            { category: 'Non-Smokers', value: 8439.50, color: '#27ae60' },
            { category: 'Smokers', value: 32050.23, color: '#e74c3c' }
        ];
        
        const trace2 = {
            x: smokerData.map(d => d.category),
            y: smokerData.map(d => d.value),
            type: 'bar',
            marker: {
                color: smokerData.map(d => d.color),
                line: { color: 'white', width: 2 }
            }
        };
        
        const layout2 = {
            yaxis: { title: 'Average Charges ($)', tickformat: '$,.0f' },
            margin: { t: 20, r: 20, b: 50, l: 60 }
        };
        
        Plotly.newPlot('smoker-plot', [trace2], layout2);
        
        // Age group bar chart
        const ageGroups = ['18-25', '26-35', '36-45', '46-55', '56-65', '65+'];
        const ageCharges = [7200, 10800, 14300, 15800, 17200, 19800];
        
        const trace3 = {
            x: ageGroups,
            y: ageCharges,
            type: 'bar',
            marker: {
                color: '#A23B72',
                line: { color: 'white', width: 2 }
            }
        };
        
        const layout3 = {
            yaxis: { title: 'Average Charges ($)', tickformat: '$,.0f' },
            xaxis: { title: 'Age Group' },
            margin: { t: 20, r: 20, b: 50, l: 60 }
        };
        
        Plotly.newPlot('age-plot', [trace3], layout3);
        
        // BMI scatter with smoker coloring
        const bmiNonSmoker = predictions.filter(p => p.smoker === 'no').map(p => ({ x: p.bmi, y: p.charges }));
        const bmiSmoker = predictions.filter(p => p.smoker === 'yes').map(p => ({ x: p.bmi, y: p.charges }));
        
        const trace4a = {
            x: bmiNonSmoker.map(p => p.x),
            y: bmiNonSmoker.map(p => p.y),
            mode: 'markers',
            type: 'scatter',
            marker: { size: 12, color: '#27ae60', opacity: 0.7 },
            name: 'Non-Smoker'
        };
        
        const trace4b = {
            x: bmiSmoker.map(p => p.x),
            y: bmiSmoker.map(p => p.y),
            mode: 'markers',
            type: 'scatter',
            marker: { size: 12, color: '#e74c3c', opacity: 0.7 },
            name: 'Smoker'
        };
        
        const layout4 = {
            xaxis: { title: 'BMI' },
            yaxis: { title: 'Charges ($)', tickformat: '$,.0f' },
            margin: { t: 20, r: 20, b: 50, l: 60 },
            legend: { x: 0.5, y: 1.1, xanchor: 'center', orientation: 'h' }
        };
        
        Plotly.newPlot('bmi-plot', [trace4a, trace4b], layout4);
        
        // Region bar chart
        const regions = ['Northeast', 'Northwest', 'Southeast', 'Southwest'];
        const regionCharges = [14200, 13400, 13200, 12400];
        const regionColors = ['#3498db', '#2ecc71', '#e74c3c', '#f39c12'];
        
        const trace5 = {
            x: regions,
            y: regionCharges,
            type: 'bar',
            marker: {
                color: regionColors,
                line: { color: 'white', width: 2 }
            }
        };
        
        const layout5 = {
            yaxis: { title: 'Average Charges ($)', tickformat: '$,.0f' },
            xaxis: { title: 'Region' },
            margin: { t: 20, r: 20, b: 50, l: 60 }
        };
        
        Plotly.newPlot('region-plot', [trace5], layout5);
        
        // Children bar chart
        const childrenCounts = [0, 1, 2, 3, 4, 5];
        const childrenCharges = [11800, 13200, 14400, 15500, 16800, 17200];
        
        const trace6 = {
            x: childrenCounts.map(c => c.toString()),
            y: childrenCharges,
            type: 'bar',
            marker: {
                color: '#F18F01',
                line: { color: 'white', width: 2 }
            }
        };
        
        const layout6 = {
            yaxis: { title: 'Average Charges ($)', tickformat: '$,.0f' },
            xaxis: { title: 'Number of Children' },
            margin: { t: 20, r: 20, b: 50, l: 60 }
        };
        
        Plotly.newPlot('children-plot', [trace6], layout6);
        
        // Histogram
        const trace7 = {
            x: predictions.map(p => p.charges),
            type: 'histogram',
            marker: {
                color: '#2E86AB',
                line: { color: 'white', width: 1 }
            },
            opacity: 0.7
        };
        
        const layout7 = {
            xaxis: { title: 'Predicted Charges ($)', tickformat: '$,.0f' },
            yaxis: { title: 'Count' },
            margin: { t: 20, r: 20, b: 50, l: 60 }
        };
        
        Plotly.newPlot('histogram-plot', [trace7], layout7);
        
        // Feature importance horizontal bar chart
        const features = ['Smoking Status', 'Age', 'BMI', 'Age √ó BMI', 'Smoker √ó Age', 'Region', 'Children', 'Sex', 'Smoker √ó BMI'];
        const importances = [0.45, 0.22, 0.10, 0.08, 0.06, 0.04, 0.03, 0.015, 0.005];
        
        const trace8 = {
            y: features,
            x: importances,
            type: 'bar',
            orientation: 'h',
            marker: {
                color: '#2E86AB',
                line: { color: 'white', width: 1 }
            }
        };
        
        const layout8 = {
            xaxis: { title: 'Importance Score' },
            margin: { t: 20, r: 20, b: 50, l: 120 }
        };
        
        Plotly.newPlot('feature-importance', [trace8], layout8);
    </script>
</body>
</html>